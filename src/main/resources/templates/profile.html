<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Profile</title>
</head>
<body>
<h2>User Profile</h2>

<p>Username: <span id="username" th:text="${user.username}"></span></p>
<p>Email: <span id="email" th:text="${user.email}"></span></p>
<p>Name: <span id="name" th:text="${user.name}"></span></p>
<p>Age: <span id="age" th:text="${user.age}"></span></p>
<p>Phone: <span id="phone" th:text="${user.phone}"></span></p>

<script>
    // This script runs AFTER Thymeleaf renders the page.
    fetch('/api/users/latest')
        .then(response => response.json())
        .then(data => {
            document.getElementById('username').textContent = data.username;
            document.getElementById('email').textContent = data.email;
            document.getElementById('name').textContent = data.name;
            document.getElementById('age').textContent = data.age;
            document.getElementById('phone').textContent = data.phone;
        })
        .catch(error => console.error('Error fetching user data:', error));
</script>

</body>
</html>
